<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Midwest Dual Tour Widget (All Properties)</title>
<style>
body{font-family:'Poppins',sans-serif;margin:0;padding:0;background:transparent;}
.floating-scheduler-mini{position:fixed;right:20px;background:linear-gradient(135deg,#eaaa00,#d4940a);
color:#fff;padding:14px 18px;border-radius:50px;box-shadow:0 4px 12px rgba(0,0,0,.15);cursor:pointer;
z-index:9999;animation:pulse 2s infinite;display:flex;align-items:center;gap:8px;font-weight:600;}
.floating-scheduler-mini:hover{filter:brightness(1.1);}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(234,170,0,0.6);}70%{box-shadow:0 0 0 12px rgba(234,170,0,0);}
100%{box-shadow:0 0 0 0 rgba(234,170,0,0);}}
@keyframes svgPulse{0%,100%{transform:scale(1);}50%{transform:scale(1.15);}}
.floating-scheduler-mini svg{width:20px;height:20px;fill:#fff;animation:svgPulse 2s infinite ease-in-out;}
#openSelfGuided{bottom:80px;}#openGuided{bottom:140px;}
.scheduler-modal{position:fixed;bottom:20px;right:20px;background:#fff;border-radius:12px;
box-shadow:0 8px 24px rgba(0,0,0,0.2);width:360px;max-height:80vh;overflow:hidden;
display:none;flex-direction:column;z-index:10000;animation:slideIn .4s ease;}
@keyframes slideIn{from{transform:translateY(30px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.scheduler-header{background:linear-gradient(135deg,#eaaa00,#d4940a);color:#fff;padding:12px;
font-weight:600;text-align:center;position:relative;}
.scheduler-close{position:absolute;top:8px;right:12px;background:none;border:none;color:#fff;
font-size:24px;cursor:pointer;line-height:1;}
.scheduler-content{padding:12px;text-align:center;font-size:14px;color:#333;}
.scheduler-iframe{border:none;width:100%;height:380px;}
.testimonial{background:#f9f9f9;padding:8px;font-size:12px;font-style:italic;border-radius:6px;margin:8px;}
</style>
</head>
<body>

<!-- Buttons -->
<div class="floating-scheduler-mini" id="openSelfGuided">
 <svg viewBox="0 0 24 24"><path d="M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-6V9a6 6 0 1 0-12 0v2H5v10h14V11h-1zm-8 0V9a4 4 0 1 1 8 0v2h-8z"/></svg>
 <span>Self-Guided Viewing</span>
</div>
<div class="floating-scheduler-mini" id="openGuided">
 <svg viewBox="0 0 24 24"><path d="M12 12c2.67 0 8 1.34 8 4v3H4v-3c0-2.66 5.33-4 8-4zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/></svg>
 <span>Book a Showing</span>
</div>

<!-- Modals -->
<div class="scheduler-modal" id="selfGuidedModal">
 <div class="scheduler-header">Schedule Your Self-Guided Tour
   <button class="scheduler-close" id="closeSelfGuided">√ó</button>
 </div>
 <div class="scheduler-content">
   <div>Tour on your schedule, even after hours.</div>
   <div>Step 1 Choose Date üìÖ</div>
   <div>Step 2 Confirm ‚ú®</div>
   <div class="testimonial">‚ÄúLoved touring on my own time! So easy.‚Äù ‚Äì Sarah</div>
 </div>
 <iframe class="scheduler-iframe" id="selfIframe" allowfullscreen></iframe>
</div>

<div class="scheduler-modal" id="guidedModal">
 <div class="scheduler-header">Schedule Your Guided Tour
   <button class="scheduler-close" id="closeGuided">√ó</button>
 </div>
 <div class="scheduler-content">
   <div>Meet our leasing team for a personalized tour.</div>
   <div>Step 1 Choose Date üìÖ</div>
   <div>Step 2 Confirm ‚ú®</div>
   <div class="testimonial">‚ÄúThey explained everything and answered all questions.‚Äù ‚Äì Alex</div>
 </div>
 <iframe class="scheduler-iframe" id="guidedIframe" allowfullscreen></iframe>
</div>

<script>
(function(){
 // --- property map ---
 const map={
  "ascotarms.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Ascot_Arms_(Empire_Park)/scheduletourwidget/a0F0H00000d3i9sUAA/",
    s:"https://prop.peek.us/659c209ccdaa2af31fe90c5e/self-guided-tour/"},
  "empirepark.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Empire_Park_(Empire_Park)/scheduletourwidget/a0F0H00000d3iA6UAI/",
    s:"https://prop.peek.us/659c20d06dc4272dc1c6fe18/self-guided-tour/"},
  "thevillageatsouthgate.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/The_Village_at_Southgate_(Southgate)/scheduletourwidget/a0F0H00000d3iAPUAY/",
    s:"https://prop.peek.us/66350d32f4dbddfd2b1863d7/self-guided-tour/"},
  "rivervalleymidwest.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Rivervalley_Townhomes_(Gold_Bar)/scheduletourwidget/a0F0H00000d3iAKUAY/",
    s:"https://prop.peek.us/66350d825cb18b6935f276b2/self-guided-tour/"},
  "sirjohnfranklin.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Sir_John_Franklin_(Old_Strathcona)/scheduletourwidget/a0F0H00000d3iAMUAY/",
    s:"https://prop.peek.us/66350e28f4dbddfd2b19646a/self-guided-tour/"},
  "pleasantviewtownhomes.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Pleasantview_Townhomes_(Empire_Park)/scheduletourwidget/a0F0H00000d3iAIUAY/",
    s:"https://prop.peek.us/668c75b7bbe11732e731384f/self-guided-tour/"},
  "elmwoodtownhomes.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Elmwood_Townhomes_(Elmwood)/scheduletourwidget/a0F0H00000d3iA5UAI/",
    s:"https://prop.peek.us/668c766ffa52e0189568d9a9/self-guided-tour/"},
  "cricketcourt.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Cricket_Court_Townhomes_(Aldergrove)/scheduletourwidget/a0F0H00000d3iA1UAI/",
    s:"https://prop.peek.us/668c76b1edee275669b4508d/self-guided-tour/"},
  "cambriancourt.prospectportal.com":{
    g:"https://www.myshowing.com/Midwest_Property_Management/Cambrian_Court_(Cambrian_Heights)/scheduletourwidget/a0F0H00000d3i9vUAA/",
    s:"https://prop.peek.us/66aaaa33f7d05462a7f4be8e/self-guided-tour/"},
  "secondstreetfundcommercial.prospectportal.com":{ // test site
    g:"https://www.myshowing.com/Midwest_Property_Management/The_Village_at_Southgate_(Southgate)/scheduletourwidget/a0F0H00000d3iAPUAY/",
    s:"https://prop.peek.us/66350d32f4dbddfd2b1863d7/self-guided-tour/"}
 };

 const host=(location.hostname||"").toLowerCase();
 const urls=map[host]||map["secondstreetfundcommercial.prospectportal.com"];

 const selfM=document.getElementById('selfGuidedModal'),
       guidM=document.getElementById('guidedModal'),
       selfI=document.getElementById('selfIframe'),
       guidI=document.getElementById('guidedIframe');

 function closeAll(){selfM.style.display='none';guidM.style.display='none';}
 function show(m){closeAll();m.style.display='flex';}

 document.getElementById('openSelfGuided').onclick=()=>{selfI.src=urls.s;show(selfM);}
 document.getElementById('openGuided').onclick=()=>{guidI.src=urls.g;show(guidM);
   setTimeout(()=>{try{void guidI.contentWindow.location.href;}
   catch(_){window.open(urls.g,'_blank');guidM.style.display='none';}},800);};

 document.getElementById('closeSelfGuided').onclick=closeAll;
 document.getElementById('closeGuided').onclick=closeAll;
 document.addEventListener('keydown',e=>{if(e.key==='Escape')closeAll();});
 document.addEventListener('click',e=>{[selfM,guidM].forEach(m=>{
   if(m.style.display==='flex'&&!m.contains(e.target)&&!e.target.classList.contains('floating-scheduler-mini'))m.style.display='none';
 });});
})();
</script>
</body>
</html>
